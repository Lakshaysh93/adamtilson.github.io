<!DOCTYPE html>
<!-- Top Navigation modified from CodingNepal - https://www.codingnepalweb.com/mega-menu-and-dropdown-menu-html-css/ -->
<!-- Side navigation modified from Sticky, Smooth, Active Nav by Chris Coyier https://codepen.io/chriscoyier/pen/qyELzd -->
<!-- Collabsibles from W3Schools https://www.w3schools.com/howto/howto_js_collapsible.asp -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adam Tilson</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/> 
  <link rel="stylesheet" href="/assets/css/style.css?v=">
  <link rel="icon" type="image/svg+xml" href="/assets/svg/at.svg">
  <!-- for mathjax support -->

</head>
<body>
  <nav id="site">
    <div class="wrapper">
      <div class="logo"><a href="#"><img
        src="/assets/svg/at.svg" alt="logo" height="35" width="35" /></a></div>
      <input type="radio" name="slider" id="menu-btn">
      <input type="radio" name="slider" id="close-btn">
      <ul class="nav-links">
        <label for="close-btn" class="btn close-btn"><i class="fas fa-times"></i></label>
        <li><a href="#">Blog</a></li>
        <li>
          <a href="#" class="desktop-item">CV ‚ñæ</a>
          <input type="checkbox" id="showDrop">
          <label for="showDrop" class="mobile-item">CV ‚ñæ</label>
          <ul class="drop-menu">
            <li><a href="#">Technical</a></li>
            <li><a href="#">Academic</a></li>
          </ul>
        </li>
        <li>
          <a href="#" class="desktop-item">Laboratory ‚ñæ</a>
          <input type="checkbox" id="showMega">
          <label for="showMega" class="mobile-item">Laboratory ‚ñæ</label>
          <div class="mega-box">
            <div class="content">

              <div class="row">
                <header>ENSE 374</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-374/">Schedule</a></li>
                  <li><a href="/labs/ense-374/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-374/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-374/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-374/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-374/lab-5">Lab 5</a></li>
                  <!--li><a href="/labs/ense-374/lab-6">Lab 6</a></li-->
                  <!--li><a href="/labs/ense-374/lab-7">Lab 7</a></li-->
                  <!--li><a href="/labs/ense-374/lab-8">Lab 8</a></li-->
                  <!--li><a href="/labs/ense-374/lab-9">Lab 9</a></li-->
                </ul>
              </div>

              <div class="row">
                <header>ENSE 411</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-411/schedule">Schedule</a></li>
                  <li><a href="/labs/ense-411/lab-0">Lab 0</a></li>
                  <li><a href="/labs/ense-411/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-411/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-411/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-411/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-411/lab-5">Lab 5</a></li>
                </ul>
              </div>

              <div class="row">
                <header>ENSE 472</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-472/">Schedule</a></li>
                  <li><a href="/labs/ense-472/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-472/lab-2">Lab 2</a></li>
                  <!--li><a href="/labs/ense-472/lab-3">Lab 3</a></li-->
                  <!--li><a href="/labs/ense-472/lab-4">Lab 4</a></li-->
                  <!--li><a href="/labs/ense-472/lab-5">Lab 5</a></li-->
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li><a href="javascript:void(0);" id="darklink">üåûÔ∏é</a></li>
      </ul>
      <label for="menu-btn" class="btn menu-btn"><i class="fas fa-bars"></i></label>
    </div>
  </nav>
  
  <div class="body">
    <nav id="toc-nav">
      <ul id="toc">

      </ul>
    </nav>

    <main id="content" class="main-content" role="main">
        <p></p>
        <h1 id="lab-2-business-network-with-packet-tracer">Lab 2: Business Network with Packet Tracer</h1>

<p>ENSE 472 - Digital Networks - Laboratory</p>

<p>University of Regina - Engineering and Applied Science - Software Systems Engineering</p>

<p>Lab Instructor: <a href="mailto:Adam.Tilson@uregina.ca">Adam Tilson</a></p>

<hr />

<p><button class="expandall">Collapse All</button></p>
<section id="objective"><button class="collapsible">Objective</button><div class="text-content"><div class="text-inner">

      <p>The purpose of this lab is to further your understanding of networks using Packet Tracer, and in particular to learn about some of the security concerns involved with setting up switches and routers for business. We will look at static routing, advanced topics such as creating VLANs for efficient communication, and the simulation view. We will also consider physically planning a network using Packet Tracer‚Äôs Physical View. This is not a comprehensive overview of all of the security concerns, but rather an introduction highlighting some interesting concepts.</p>

    </div></div></section>
<section id="equipment"><button class="collapsible">Equipment</button><div class="text-content"><div class="text-inner">

      <p>A Windows, Mac or Linux computer running Packet Tracer. The instructor will only be testing on Windows - please schedule a meeting or meet me after the pre-lab if you are having difficulties getting this working on your local computer.</p>

    </div></div></section>
<section id="part1packettracerphysicalview"><button class="collapsible">Part 1: Packet Tracer Physical View</button><div class="text-content"><div class="text-inner">

      <p>The Packet Tracer physical view enables you to plan your network physically, in terms of cities and buildings</p>
      <ul>
        <li>We have several levels of granularity - Intercity (country, or world, or province, etc.), home city (city, or neighborhood), office level (floorplan), and wiring closet
          <ul>
            <li>Lecture tie in: What is the name for a network that exists at each of these scales?</li>
          </ul>
        </li>
        <li>You can assign individual background to each level to better represent the areas</li>
        <li>The lowest level, the wiring closet, is where networking infrasctructure is housed, akin a datacenter
          <ul>
            <li>There may need to be multiple wiring closets in each floor and each building</li>
          </ul>
        </li>
        <li>In the physical view you see the physical representation of your equipment
          <ul>
            <li>You can place elements where you believe they belong</li>
            <li>Smaller routers may go on tables, servers are rack-mounted</li>
          </ul>
        </li>
        <li>You will want to cable from the logical view, to create the create network topologies, as we saw last week‚Ä¶
          <ul>
            <li>But when you return to the physical view, the cables will be there</li>
          </ul>
        </li>
      </ul>

      <p>The physical view rounds out your understanding of how these objects work in the real world</p>

      <p>Download the following image assets, care of Google and University of Regina:</p>

      <p><img src="res/city-regina.png" alt="" /></p>

      <p><img src="res/university.png" alt="" /></p>

      <p><img src="res/floor-plan-library-6f.png" alt="" /></p>

      <p>Let‚Äôs quickly look at setting up an environment using some photos from Google Maps:</p>

      <p><img src="res/physical-set-background.png" alt="" /></p>

      <p><img src="res/physical-set-background-2.png" alt="" /></p>

      <p>You can navigate up and down layers:</p>

      <p><img src="res/up-and-down.png" alt="" /></p>

      <p>Once you have completed one layer, drop down to the next layer by double clicking on the smaller view. Here‚Äôs an example of three layers:</p>

      <p><img src="res/complete.png" alt="" /></p>

      <p>You can also have multiple cities in a country, multiple floorplans in a city, multiple wiring closets in a floorplan, etc.</p>

      <p>Other things you can do in physical view:</p>
      <ul>
        <li>See Wifi Ranges (But these will only be accurate if you set all of your container sizes properly)</li>
      </ul>

      <p><img src="res/wifi.png" alt="" /></p>

      <ul>
        <li>add furniture and equipment to your wiring closets:</li>
      </ul>

      <p><img src="res/add-furniture.png" alt="" /></p>

      <ul>
        <li>add elements by dragging and dropping from the equipment area, as we did last week.</li>
      </ul>

      <p>When you switch back to logical view, elements are placed somewhat randomly, so you‚Äôll want to also organize them to match appropriate topologies:</p>

      <p><img src="res/logical-view.png" alt="" /></p>

      <p>Connect elements appropriately from this view.</p>

    </div></div></section>
<section id="part2accessingandsecuringaswitch"><button class="collapsible">Part 2: Accessing and Securing a Switch</button><div class="text-content"><div class="text-inner">

      <p>In the last lab we saw how we could program a router using the Packet Tracer Command Line Interface (CLI)</p>
      <ul>
        <li>But how do you access this CLI in a real world?
          <ul>
            <li>You would connect using a laptop using TTY over COM (Or USB to COM)</li>
            <li>Or, if the Switch has an IP address assigned, you could Telnet or SSH in remotely</li>
            <li>All of this can be simulated in Packet Tracer, so you can gain some ‚Äúvirtual‚Äù real world experience
              <ul>
                <li>Let‚Äôs see an example of each:</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>

      <p>Note: We‚Äôre going to start with a Switch, but many of these processes also work with a Router</p>

      <p>Start by adding a laptop, a 2960 Switch and a 4321 Router</p>
      <ul>
        <li>Connect the Laptop to the Switch using a Console cable. (RS232 to Console)</li>
        <li>On the PC, use the <code class="language-plaintext highlighter-rouge">Terminal</code> application.
          <ul>
            <li>Leave the default settings, and press okay.</li>
            <li>This is an application similar to PuTTy on Windows, which performs Serial emulation with the same settings</li>
          </ul>
        </li>
      </ul>

      <p><img src="res/console-connect.png" alt="" /></p>

      <p>Commands for configuring the Switch are issued from different modes. We briefly saw these last lab, but did not investigate thoroughly. In this sense, it acts something like a state machine. The following diagram lists a few modes we will need to use for different operations, and how to get to them:</p>

      <p><img src="res/config-modes.svg" alt="" /></p>

      <p>This set of states is not exhaustive, but gives a good starting place.</p>

      <h3 id="switch-and-router-commands">Switch and Router commands:</h3>

      <p>Commands will vary by device and mode. To start, query commands:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?
</code></pre></div>      </div>

      <p>-lists commands and what they do. These will differ by mode.</p>

      <p>You can also find all commands which start with a letter or series of letters, e.g.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>con?
</code></pre></div>      </div>

      <p>will show: <code class="language-plaintext highlighter-rouge">configure</code> <code class="language-plaintext highlighter-rouge">connect</code></p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conf?
</code></pre></div>      </div>

      <p>will only show <code class="language-plaintext highlighter-rouge">configure</code></p>

      <p>If your command would only match a single result, you can tab complete.</p>
      <ul>
        <li>You can also issue that shortened phrase as an alternative for the longer command</li>
      </ul>

      <p>e.g. instead of typing <code class="language-plaintext highlighter-rouge">configure</code>, you can just type <code class="language-plaintext highlighter-rouge">conf</code></p>

      <p>you can also query the next command, e.g.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>configure ?
</code></pre></div>      </div>

      <p>returns <code class="language-plaintext highlighter-rouge">terminal</code></p>

      <p>So the full command is:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>configure terminal
</code></pre></div>      </div>

      <p>or simply</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conf t
</code></pre></div>      </div>

      <p>A useful configuration to set right away, from global config is:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>no ip domain-lookup
</code></pre></div>      </div>

      <ul>
        <li>This prevents the router from thinking that mistyped commands are actually domain names, and attempting to do a DNS lookup.</li>
        <li>As you are just starting, expect some typos!
          <ul>
            <li>this will keep the switch from hanging for a few minutes on every typo!</li>
          </ul>
        </li>
      </ul>

      <h3 id="setting-a-password-for-the-console-connection">Setting a password for the console connection</h3>

      <p>Notice that we were able to just plug a cable into our switch and start issuing commands.</p>
      <ul>
        <li>This isn‚Äôt very secure, we could be ‚Äòphysically hacked‚Äô by anyone who knows how to program a Switch and has physical access to the device.</li>
        <li>Let‚Äôs set a password for the console port:</li>
      </ul>

      <p>From User Exec Mode:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enable
configure terminal
</code></pre></div>      </div>

      <p>We want to configure line connections to the console port:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>line console 0
</code></pre></div>      </div>

      <p>Assign a password to this interface:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>password switch1234
</code></pre></div>      </div>

      <p>Force the user to login:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>login
</code></pre></div>      </div>

      <p>We want to return to the default state of the router:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exit
exit
exit
</code></pre></div>      </div>

      <p>Next time you try to reach user exec mode, you‚Äôll be prompted for the password</p>

      <h3 id="setting-a-password-on-privileged-exec-mode">Setting a password on privileged exec mode</h3>

      <p>Privileged Exec Mode is similar to a <code class="language-plaintext highlighter-rouge">sudo</code> or <code class="language-plaintext highlighter-rouge">root</code> account on linux.</p>
      <ul>
        <li>It is our entry point to making changes to the configuration.</li>
        <li>We should put a password on this account too.</li>
      </ul>

      <p>From Global Config:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enable secret admin12345
</code></pre></div>      </div>

      <ul>
        <li>secret means this password will be hashed</li>
        <li>As before you can exit out, and then when you come back in confirm that both passwords are prompted</li>
      </ul>

      <h3 id="inspecting-our-configuration">Inspecting our configuration</h3>

      <p>From privileged exec:</p>

      <p>See running configuration with:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>show running-config
</code></pre></div>      </div>

      <ul>
        <li>you can see the password, but it‚Äôs hashed (MD5)</li>
        <li>you can also find the line console password in plain text.
          <ul>
            <li>We‚Äôll fix this in a bit.</li>
          </ul>
        </li>
      </ul>

      <h3 id="adding-passwords-to-ssh-lines">Adding passwords to SSH lines</h3>

      <p>There are a few other ways you can access the command line</p>
      <ul>
        <li>e.g. a computer connected with ethernet could access it over telnet.</li>
        <li>We should set passwords here too!</li>
      </ul>

      <p>From Global Configuration‚Ä¶</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>line vty 0 15
</code></pre></div>      </div>

      <p><code class="language-plaintext highlighter-rouge">vty</code> stands for virtual teletype, aka telnet, and 0 15 opens 16 concurrent sessions, numbered 0 to 15</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>password switch123
login
</code></pre></div>      </div>
      <ul>
        <li>
          <p>assign a password and force login</p>
        </li>
        <li>
          <p>return to privileged exec mode and run:</p>
        </li>
      </ul>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>show run
</code></pre></div>      </div>

      <p>You can now see passwords for all of the sessions.</p>

      <p>Let‚Äôs hash those passwords:</p>

      <p>from global configure:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service password-encryption
exit
show run
</code></pre></div>      </div>

      <p>This is a type 7 hash. It‚Äôs not particularly secure but it‚Äôs better than plain text!</p>

      <h3 id="telnet-access">Telnet access</h3>

      <p>If you want to access a Switch over ethernet, first we must assign the device an IP on the VLAN:</p>

      <p>From global configuration:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>interface vlan 1
ip address 192.168.0.2 255.255.255.0
ip default-gateway 192.168.0.1
no shutdown
</code></pre></div>      </div>

      <ul>
        <li>then telnet to that IP</li>
      </ul>

      <p>assign the connected computer a static ip:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.0.10 255.255.255.0
</code></pre></div>      </div>

      <p>Connect the computer with an ethernet cable</p>

      <p>and then from the computers command line:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telnet 192.168.0.2
</code></pre></div>      </div>

      <ul>
        <li>use the <code class="language-plaintext highlighter-rouge">vty</code> password</li>
        <li>now you can configure the router remotely</li>
        <li>If you don‚Äôt want all the connected devices to be able to configure the router, you can restrict access to individual VLANs, which will be explained in a later section.</li>
      </ul>

      <h3 id="ssh-access">SSH access</h3>

      <p>Instead of Telnet, you can also access your Switch using SSH. The difference is that SSH encrypts operations which are being sent, compared to telnet which sends them in plain text.</p>

      <ul>
        <li>ensure your PC has the ip address 192.168.0.5 255.255.255.0</li>
        <li>ensure the router has the ip address 192.168.0.2 255.255.255.0
          <ul>
            <li>That was done in the <code class="language-plaintext highlighter-rouge">telnet access</code> section</li>
          </ul>
        </li>
      </ul>

      <p>From global config, run:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hostname S1
</code></pre></div>      </div>

      <p>gives the switch a proper name</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip domain-name mynetwork.com
</code></pre></div>      </div>
      <p>gives the current network a domain</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>crypto key generate rsa
</code></pre></div>      </div>

      <p>generates a ssh key</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2048
</code></pre></div>      </div>

      <p>number of bits. 2048 is still considered secure so far.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip ssh version 2
</code></pre></div>      </div>

      <p>start ssh version 2</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>line vty 0 15
</code></pre></div>      </div>

      <p>configure vty for all lines</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>transport input ssh
</code></pre></div>      </div>

      <p>turn on ssh on all lines</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>login local
</code></pre></div>      </div>

      <p>force login</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>username admin password admin123456
</code></pre></div>      </div>

      <p>set a username and password</p>

      <p>Now you should be able to connect over SSH</p>

      <p>from the command line of a device connected over ethernet run:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -l admin 192.168.0.2
</code></pre></div>      </div>

      <p>Now the commands you send will be encrypted.</p>

      <h3 id="saving-our-work">Saving our work</h3>

      <p>Recall from last week that all of our changes exist only in the device RAM. We can load this configuration on startup with:</p>

      <p>from Privileged Exec Mode</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>copy running-config startup-config
</code></pre></div>      </div>

      <p>or, shorthand:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>copy run start
</code></pre></div>      </div>

      <p><em>Always do this before leaving packet tracer so your configuration work is saved!</em></p>

    </div></div></section>
<section id="part3staticrouting"><button class="collapsible">Part 3: Static Routing</button><div class="text-content"><div class="text-inner">

      <p>Last week we saw how to configure gateway addresses on interfaces.</p>

      <p>This week we‚Äôll look at assigning static routes to routers</p>
      <ul>
        <li>This tells the router, that, for a given destination address, the address of the connected device which is the next hop</li>
      </ul>

      <p>Let‚Äôs consider the following example:</p>

      <p><img src="res/static-route-setup.png" alt="" /></p>

      <p>How do we get traffic from the 172.16.x.x/16 network to the 192.16.10.x/24 network and back?</p>

      <p>Note that most of these same commands apply to routers as well, so we can follow the same processes to connect to and secure routers as we did with our switches.</p>

      <p>Syntax:</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip route &lt;destination&gt; &lt;subnet&gt; &lt;next hop&gt;
</code></pre></div>      </div>

      <p>example, if the next hop to get to 192.168.10.x / 24, is 10.0.0.1</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip route 192.168.10.0 255.255.255.0 10.0.0.1
</code></pre></div>      </div>

      <p>Keep in mind, this only goes one way. We also need to do this the other way on the other router.</p>

      <p>Placing a <code class="language-plaintext highlighter-rouge">0</code> is the destination address in the fourth octet, matches any value for this octet. This will route all packets with the destination address 192.168.10.x to the next hops destination 10.0.0.100. This is a known as a wildcard match, and is very powerful.</p>

      <p>We can also have an exit interface, e.g.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip route 192.168.10.0 255.255.255.0 g0/0/1
</code></pre></div>      </div>

      <p>In this case, rather than specifying the destination IP address of the next hop, we specify which physical interface to send packets out on.</p>

      <p>We can see our routes using the following, from privileged exec:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>show ip route
</code></pre></div>      </div>

      <p>We can also set a default route, which is used as a last resort if no other destination is found.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip route 0.0.0.0 0.0.0.0 {dest}
</code></pre></div>      </div>

      <p>e.g.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip route 0.0.0.0 0.0.0.0 10.0.0.2
</code></pre></div>      </div>

      <p>Recall, 0‚Äôs are wildcards, so this means match any IP and any subnet mask, and send the results to the destination.</p>

    </div></div></section>
<section id="part4virtuallans"><button class="collapsible">Part 4: Virtual LANs</button><div class="text-content"><div class="text-inner">

      <p>When computers connect to a switch, by default they are all on the same Virtual LAN (VLAN). This means that packets may be shared freely among these computers using broadcast. Additionally, all these computers are in the same collision domain, though most of the limitations of this are mitigated by using a Switch rather than a hub once it has populated the mac address table. Overall, this configuration is inefficient and insecure if computers have no need to communicate directly across networks, e.g. if the network was shared by different departments or companies which would not communicate directly.</p>

      <p>We could fix this by:</p>

      <ul>
        <li>buying more switches, however this is costly</li>
        <li>Using VLANs, Virtual LANs, which splits up a switch into a number of Virtual LANs to better manage traffic
          <ul>
            <li>A Virtual LAN acts just like a LAN
              <ul>
                <li>computers inside the VLAN can communicate directly with other computers in the VLAN</li>
                <li>computers outside the VLAN cannot directly communicate with computers in the VLAN</li>
              </ul>
            </li>
            <li>Also VLANs can be configured to provide different Quality of Service for the different VLANs, including data and voice</li>
          </ul>
        </li>
      </ul>

      <p>We already looked at the 2960 Router. This router has 24 fast ethernet ports, and 2 gigabit ethernet ports, which we can slice up into VLANs.</p>

      <p>Additionally, we can create a trunk, an interface which is shared by the different VLANs to all pass traffic to a router using one port.</p>

      <p>Let create 4 VLANS, 3 for devices and one for management</p>

      <p><img src="res/vlan-setup.png" alt="" /></p>

      <p>From the Switch CLI‚Ä¶</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enable
configure terminal

vlan 99
name mgt
exit

vlan 10
name lab-10
exit

vlan 20
name lab-20
exit

vlan 30
name lab-30
exit
exit
copy running-config startup-config
&lt;enter&gt;
</code></pre></div>      </div>

      <p>Next, we need to assign some interfaces to each of these vlans:</p>

      <table>
        <thead>
          <tr>
            <th>ethernet interface</th>
            <th>port range</th>
            <th>vlan</th>
            <th>addresses</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>fastEthernet 0</td>
            <td>6 - 10</td>
            <td>vlan 10</td>
            <td>192.168.10.x</td>
          </tr>
          <tr>
            <td>fastEthernet 0</td>
            <td>11 - 17</td>
            <td>vlan 20</td>
            <td>192.168.20.x</td>
          </tr>
          <tr>
            <td>fastEthernet 0</td>
            <td>18 - 23</td>
            <td>vlan 30</td>
            <td>192.168.30.x</td>
          </tr>
          <tr>
            <td>fastEthernet 0</td>
            <td>24</td>
            <td>vlan 99</td>
            <td>192.168.99.x</td>
          </tr>
        </tbody>
      </table>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conf t

int range fastEthernet 0/6-10
switchport mode access
switchport access vlan 10
exit

int range fastEthernet 0/11-17
switchport mode access
switchport access vlan 20
exit

int range fastEthernet 0/18-23
switchport mode access
switchport access vlan 30
exit

int fastEthernet 0/24
switchport mode access
switchport access vlan 99
exit

exit
</code></pre></div>      </div>

      <p>We can see the current state of the VLAN with:</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>show vlan brief
</code></pre></div>      </div>

      <p>The management vlan needs an private IP for doing management. The other VLANs will never need to ping the switch, and thus the switch does not need an IP address on that VLAN.</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>en
conf t
interface vlan 99
ip address 192.168.99.2 255.255.255.0
no shutdown
exit
</code></pre></div>      </div>

      <p>Native is for compatibility, for older switches that don‚Äôt understand what vlans are</p>

      <p>Once this is complete, connect each computer to the appropriate interfaces. e.g., those in lab-10 should be connected from interfaces 6 to 10.</p>

      <p><img src="res/vlan-connected.png" alt="" /></p>

      <p>Verify the configuration is correct - PCs within a VLAN should be able to ping eachother, but should not be able to ping PCs in other VLANs. Confirm this is true.</p>

      <p><em>Challenge</em> - VLANs can even span multiple switches. For example you could have lab-10 use ports 6-10 on Switch-A, and use ports 8-20 on Switch-B. Then you would just need to physically connect these two Switches with a crossover cable somewhere within these ranges. Can you make this work?</p>

      <h3 id="router-on-a-stick">Router on a Stick</h3>

      <p>If the connected devices need no internet connectivity, VLANs are fine. However, to gain internet connectivity. We need a Layer-3 device. We could connect these to a layer 3 switch, or we could connect to a single router using a configuration called a ‚ÄòRouter on a Stick‚Äô.</p>

      <p>Setting up the trunk</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>en
conf t
interface fastEthernet 0/1
switchport mode trunk
switchport trunk allowed vlan 1-99
end
</code></pre></div>      </div>

      <p>We will need to connect this trunk interface to the router. So three network‚Äôs traffic is shared over one interface.</p>

      <p>On the router side, we need to understand that all three of these networks exist on the incoming interface:</p>

      <p>Add the following to a Router CLI</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enable
conf t

interface gigabitEthernet 0/0/0.10
encapsulation dot1Q 10
ip address 192.168.10.1 255.255.255.0
no shutdown
exit

interface gigabitEthernet 0/0/0.20
encapsulation dot1Q 20
ip address 192.168.20.1 255.255.255.0
no shutdown
exit

interface gigabitEthernet 0/0/0.30
encapsulation dot1Q 30
ip address 192.168.30.1 255.255.255.0
no shutdown
exit

interface gigabitEthernet 0/0/0.99
encapsulation dot1Q 99
ip address 192.168.99.1 255.255.255.0
no shutdown
exit

interface gigabitEthernet 0/0/0
no shutdown
exit

</code></pre></div>      </div>

      <p>Connect the router on gigabitEthernet 0/0/0 to the switch fastEthernet 0/1.</p>

      <p><img src="res/on-a-stick.png" alt="" /></p>

      <p>Now this router will act as a gateway for each of the VLANs. The router will unpack the packets with the subnet, and forward them as needed.</p>

      <p>What did this accomplish? Should we be able to ping across networks now? Try it and confirm.</p>

      <p>This is a bit of a 90s approach, and typically superseded by Layer 3 Switches, but I believe it‚Äôs a good learning experience to understand the layer-2 and layer-3 devices.</p>

    </div></div></section>
<section id="part5simulationmode"><button class="collapsible">Part 5: Simulation Mode</button><div class="text-content"><div class="text-inner">

      <p>So far we have largely stayed out of simulation mode. We can use it now to see how our network works. Try sending packets across one VLAN, and across different VLANS.</p>

      <p><img src="res/simulation-workflow.png" alt="" /></p>

      <ol>
        <li>Switch into Simulation Mode</li>
        <li>Send a PDU</li>
        <li>Select start point</li>
        <li>Select end point</li>
        <li>The play controls let you skip through actions step by step</li>
        <li>The event list shows discrete oprations and protocolas</li>
      </ol>

      <p>The packets populate the event list:</p>

      <p><img src="res/packets-recieved.png" alt="" /></p>

      <p>Note: The first time you send a simple PDU, there may be additional traffic. This is because devices are still building their routing tables, and thus require flooding to learn MAC Addresses.</p>

      <p>If there is too much traffic on the event list, you can hide some of it by setting up filters in the lower right. Pings, for example. our simple PDU, use the ICMP Protocol, so we can turn others off to only see those packets.</p>
      <ul>
        <li>It may be quicker to show none, and then allow only ICMP</li>
      </ul>

      <p>In particular, we see that this packet only needed to get routed through the switch. Let‚Äôs also try sending a packet across VLANs.</p>

      <p><img src="res/across-vlans.png" alt="" /></p>

      <p>We can look inside a packet by clicking on the envelope:</p>

      <p><img src="res/pdu-details.png" alt="" /></p>

      <p>The Major Limitation to the Packet Tracer simulation is that we cannot perform complex simulations, time them, and take data, for example, for research puropses. This is more intended just for learning.</p>

    </div></div></section>
<section id="labassignment"><button class="collapsible">Lab Assignment</button><div class="text-content"><div class="text-inner">

      <p>In this assignment, imagine you you are being employed by a Software business startup incubator, (Similar to the Conexus Cultivator). The incubator currently hosts office space for three startups, and it is your job to ensure they have the network requirements to run their business.</p>

      <p>The companies include:</p>
      <ul>
        <li>An Indie Game Developer
          <ul>
            <li>Two team members, on Floor 1</li>
            <li>They have created an indie fighting game</li>
            <li>As the game is currently in a closed beta, they need to host downloads, which is ~1 GB download</li>
            <li>They will also need to host a web server for online matches</li>
          </ul>
        </li>
        <li>A Progressive Web App Developer
          <ul>
            <li>Three team members, on Floor 1</li>
            <li>Their app allows schools to host interactive video content and quizzes</li>
            <li>They too will host local servers</li>
          </ul>
        </li>
        <li>An algorithm developer
          <ul>
            <li>Four team members, two on Floor 1 and two on Floor 2</li>
            <li>They have two teams, who, due to space restrictions, are working on separate floors.</li>
            <li>It is not feasible to connect all of these PCs to the same Switch.</li>
            <li>Furthermore, for secrecy, they would prefer computers be not connected to the internet.</li>
          </ul>
        </li>
      </ul>

      <p>You will need to:</p>
      <ul>
        <li>Think up some amusing, clever or random names for each of these startups</li>
        <li>Add appropriate images for the intercity, city, and office views (google search floor plans)
          <ul>
            <li>For simplicity, you can have the companies set up on Research Drive at the university</li>
            <li>Servers and switches should be in Wiring Closets, but PCs can be in the Office level floor plan(s)</li>
          </ul>
        </li>
        <li>Add locations for two startup floors, and place each of the startups appropriately
          <ul>
            <li>Each floor should have a wiring closet in it</li>
          </ul>
        </li>
        <li>Add a location for a user. For simplicity this user can also be a test user for the PWA and the Fighting Game
          <ul>
            <li>Ensure the home user can connect to all businesses as appropriate</li>
          </ul>
        </li>
        <li>Employ all of the best security principles as discussed in the course
          <ul>
            <li>This should include a management LAN and machine</li>
            <li>Add a label near the management PC for all the usernames and passwords you have set!</li>
          </ul>
        </li>
        <li>
          <p>Employ VLANs for each company</p>
        </li>
        <li>Assume you only have access to two 2960 Switches, and a 4321 Routers.
          <ul>
            <li>For this lab, you may represent the internet by at least one additional 4321 router,</li>
            <li>represent the user as an external PC connected to this external router (what type of cable?).</li>
            <li>Don‚Äôt forget to set up static routes</li>
          </ul>
        </li>
      </ul>

      <p>This completes our foray into Packet Tracer.</p>
    </div></div></section>

    </main>

  </div>
  <footer>
    2021 Adam Tilson.
    <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/"
      >CC-BY-NC-SA</a
    >
  </footer>
  <button onclick="topFunction()" id="topButton" title="Go to top">‚ñ≤ Top</button> 
  <script src="/assets/js/script.js"></script>

</body>
</html>
